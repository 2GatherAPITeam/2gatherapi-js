"use strict";function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return void 0===t?"undefined":_typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":_typeof2(t)};!function(t,e){"function"==typeof define&&define.amd?define([],function(){return t.annyang=e(t)}):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e(t):t.annyang=e(t)}("undefined"!=typeof window?window:void 0,function(t,e){var n,i=t.SpeechRecognition||t.webkitSpeechRecognition||t.mozSpeechRecognition||t.msSpeechRecognition||t.oSpeechRecognition;if(!i)return null;var o,a,s=[],r={start:[],error:[],end:[],soundstart:[],result:[],resultMatch:[],resultNoMatch:[],errorNetwork:[],errorPermissionBlocked:[],errorPermissionDenied:[]},c=0,l=0,u=!1,h="font-weight: bold; color: #00f;",p=!1,d=!1,m=/\s*\((.*?)\)\s*/g,g=/(\(\?:[^)]+\))\?/g,y=/(\(\?)?:\w+/g,b=/\*\w+/g,v=/[\-{}\[\]+?.,\\\^$|#]/g,f=function(t){return t=t.replace(v,"\\$&").replace(m,"(?:$1)?").replace(y,function(t,e){return e?t:"([^\\s]+)"}).replace(b,"(.*?)").replace(g,"\\s*$1?\\s*"),new RegExp("^"+t+"$","i")},_=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];t.forEach(function(t){t.callback.apply(t.context,n)})},C=function(){return o!==e},k=function(t,e){-1!==t.indexOf("%c")||e?console.log(t,e||h):console.log(t)},F=function(){C()||n.init({},!1)},w=function(t,e,n){s.push({command:t,callback:e,originalPhrase:n}),u&&k("Command successfully loaded: %c"+n,h)},O=function(t){_(r.result,t);for(var e,n=0;n<t.length;n++){e=t[n].trim(),u&&k("Speech recognized: %c"+e,h);for(var i=0,o=s.length;i<o;i++){var a=s[i],c=a.command.exec(e);if(c){var l=c.slice(1);return u&&(k("command matched: %c"+a.originalPhrase,h),l.length&&k("with parameters",l)),a.callback.apply(this,l),void _(r.resultMatch,e,a.originalPhrase,t)}}}_(r.resultNoMatch,t)};return n={init:function(h){var m=!(arguments.length>1&&arguments[1]!==e)||arguments[1];o&&o.abort&&o.abort(),(o=new i).maxAlternatives=5,o.continuous="http:"===t.location.protocol,o.lang="en-US",o.onstart=function(){d=!0,_(r.start)},o.onsoundstart=function(){_(r.soundstart)},o.onerror=function(t){switch(_(r.error,t),t.error){case"network":_(r.errorNetwork,t);break;case"not-allowed":case"service-not-allowed":a=!1,(new Date).getTime()-c<200?_(r.errorPermissionBlocked,t):_(r.errorPermissionDenied,t)}},o.onend=function(){if(d=!1,_(r.end),a){var t=(new Date).getTime()-c;(l+=1)%10==0&&u&&k("Speech Recognition is repeatedly stopping and starting. See http://is.gd/annyang_restarts for tips."),t<1e3?setTimeout(function(){n.start({paused:p})},1e3-t):n.start({paused:p})}},o.onresult=function(t){if(p)return u&&k("Speech heard, but annyang is paused"),!1;for(var e=t.results[t.resultIndex],n=[],i=0;i<e.length;i++)n[i]=e[i].transcript;O(n)},m&&(s=[]),h.length&&this.addCommands(h)},start:function(t){F(),p=(t=t||{}).paused!==e&&!!t.paused,a=t.autoRestart===e||!!t.autoRestart,t.continuous!==e&&(o.continuous=!!t.continuous),c=(new Date).getTime();try{o.start()}catch(t){u&&k(t.message)}},abort:function(){a=!1,l=0,C()&&o.abort()},pause:function(){p=!0},resume:function(){n.start()},debug:function(){var t=!(arguments.length>0&&arguments[0]!==e)||arguments[0];u=!!t},setLanguage:function(t){F(),o.lang=t},addCommands:function(e){var n;F();for(var i in e)if(e.hasOwnProperty(i))if("function"==typeof(n=t[e[i]]||e[i]))w(f(i),n,i);else{if(!("object"===(void 0===n?"undefined":_typeof(n))&&n.regexp instanceof RegExp)){u&&k("Can not register command: %c"+i,h);continue}w(new RegExp(n.regexp.source,"i"),n.callback,i)}},removeCommands:function(t){t===e?s=[]:(t=Array.isArray(t)?t:[t],s=s.filter(function(e){for(var n=0;n<t.length;n++)if(t[n]===e.originalPhrase)return!1;return!0}))},addCallback:function(n,i,o){var a=t[i]||i;"function"==typeof a&&r[n]!==e&&r[n].push({callback:a,context:o||this})},removeCallback:function(t,n){var i=function(t){return t.callback!==n};for(var o in r)r.hasOwnProperty(o)&&(t!==e&&t!==o||(r[o]=n===e?[]:r[o].filter(i)))},isListening:function(){return d&&!p},getSpeechRecognizer:function(){return o},trigger:function(t){n.isListening()?(Array.isArray(t)||(t=[t]),O(t)):u&&k(d?"Speech heard, but annyang is paused":"Cannot trigger while annyang is aborted")}}});var Gatherapi=function(){function t(e){_classCallCheck(this,t),this.options=e,this.requiredUtills=e.requiredUtills?e.requiredUtills:["voice command"],e.middlewareDevices&&(this.middleware=new Middleware(e.middlewareDevices,this)),this.objects=[],this.plugins=[],this.objectToObjectFactoryMap={inputFactory:"tg-input",buttonFactory:"tg-button",linkFactory:"tg-a",paragraphFactory:"tg-paragraph",imgFactory:"tg-img",liFactory:new LiFactory(this)},this.pluginToPluginFactoryMap={loginFactory:"tg-login",menuFactory:"tg-menu",accessibilityFactory:"tg-accessibility",chatFactory:"tg-chat",libraryFactory:"tg-library",gameFactory:"tg-game"},this.utils={annyangUtil:new AnnyangUtil,chatUtil:new ChatUtil,textToVoice:new SpeechUtil,boxModal:new BoxModelUtil},this.objectFactories={inputFactory:new InputFactory(this),imgFactory:new ImgFactory(this),buttonFactory:new ButtonFactory(this),paragraphFactory:new ParagraphFactory(this),linkFactory:new LinkFactory(this)},this.pluginFactories={loginFactory:new LoginFactory,chatFactory:new ChatFactory,menuFactory:new MenuFactory,libraryFactory:new LibraryFactory,accessibilityFactory:new AccessibilityFactory,gameFactory:new GameFactory},this.utilsConfiguration(),this.middleware&&this.middleware.init(),this.scanForPluginsOrObjects()}return _createClass(t,[{key:"utilsConfiguration",value:function(){this.utils.annyangUtil.initAnnyang(this.options.language),this.utils.annyangUtil.addExitCommand(),this.utils.textToVoice.initSpeech(this.options.language)}},{key:"scanForPluginsOrObjects",value:function(){this.scanObjects(),this.scanPlugins()}},{key:"scanObjects",value:function(){for(var t in this.objectToObjectFactoryMap)for(var e=document.getElementsByTagName(this.objectToObjectFactoryMap[t]),n=0;n<e.length;n++)this.objectFactories[t].createObject(e[n])}},{key:"enableExternalInputsHandlers",value:function(){var t=this.options.virtualKeyboardLang;for(var e in this.middleware.externalInputs)this.middleware.externalInputs[e].connected&&this.objects.forEach(function(n){n["enable"+e](t)})}},{key:"scanPlugins",value:function(){for(var t in this.pluginToPluginFactoryMap)for(var e=document.getElementsByTagName(this.pluginToPluginFactoryMap[t]),n=0;n<e.length;n++)this.pluginFactories[t].createPlugin(e[n])}}]),t}(),Middleware=function(){function t(e,n){_classCallCheck(this,t),this.devices=e,this.gatherApiObject=n,this.connectedDevices={},this.externalInputs={Clickers:new Clickers,Tobii:new Tobii,joystick:new Joystick}}return _createClass(t,[{key:"init",value:function(t){var e=[];for(var n in this.devices)e.push({productId:this.devices[n].productId,vendorId:this.devices[n].vendorId});this.checkForConnectedDevices(JSON.stringify(e),t)}},{key:"checkForConnectedDevices",value:function(t,e){var n=new XMLHttpRequest,i=this;n.onreadystatechange=function(){if(n.readyState==XMLHttpRequest.DONE){i.connectedDevices=JSON.parse(n.responseText);var t=!1;for(var o in i.externalInputs)if(i.devices[o]){var a=i.externalInputs[o];for(var s in i.connectedDevices)if(i.connectedDevices[s].productId==i.devices[o].productId&&i.connectedDevices[s].vendorId==i.devices[o].vendorId){a.connectExternalInput(),t=!0;break}t?i.gatherApiObject.enableExternalInputsHandlers():0!=i.devices.length&&e?e():0!=i.devices.length&&alert("one of the following required devices isn't connected: "+Object.keys(i.devices))}}},n.open("POST","http://localhost:8082/device-checker/get-user-active-devices",!0),n.setRequestHeader("Content-type","application/json"),n.setRequestHeader("Accept","application/JSON"),n.send(t)}},{key:"getConnectedDevices",value:function(){return this.connectedDevices}},{key:"showConnectedDevices",value:function(){console.log(this.connectedDevices)}},{key:"enableTobii",value:function(){console.log("enabled Tobii")}},{key:"enableKeyboard",value:function(){console.log("enbled Keyboard")}}]),t}(),ExternalInput=function t(){if(_classCallCheck(this,t),this.connected=!1,void 0===this.connectExternalInput)throw new TypeError("Must override connectExternalInput")},clickersInstance=null,Clickers=function(t){function e(){var t;_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return clickersInstance||(clickersInstance=n),n.i=0,t=clickersInstance,_possibleConstructorReturn(n,t)}return _inherits(e,t),_createClass(e,[{key:"connectExternalInput",value:function(){(e=document.querySelector("body")).onmousedown=this.doubleclick;var t,e;t=function(t){t.preventDefault()},e.addEventListener("contextmenu",t)}},{key:"doubleclick",value:function(t){console.log(t);var e=document.querySelector("body");null==e.getAttribute("data-dblclick")?(e.setAttribute("data-dblclick",1),setTimeout(function(){1==e.getAttribute("data-dblclick")&&(0==t.button?clickersInstance.rightClickFunction():clickersInstance.leftClickFunction()),e.removeAttribute("data-dblclick")},300)):(e.removeAttribute("data-dblclick"),clickersInstance.chooseFunction())}},{key:"leftClickFunction",value:function(){var t=document.querySelectorAll("input,a,select,button,textarea,.tg-library-img");1==this.i&&(this.i=t.length-1);var e=t[--this.i];console.log(e),e.focus()}},{key:"rightClickFunction",value:function(){var t=document.querySelectorAll("input,a,select,button,textarea,.tg-library-img");this.i==t.length-1&&(this.i=-1),this.i=this.i+1;var e=t[this.i];console.log(e),e.focus()}},{key:"chooseFunction",value:function(){document.querySelectorAll("input,a,select,button,textarea,.tg-library-img")[this.i].click()}}]),e}(ExternalInput),tobiiInstance=null,Tobii=function(t){function e(){var t;_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return tobiiInstance||(tobiiInstance=n),t=tobiiInstance,_possibleConstructorReturn(n,t)}return _inherits(e,t),_createClass(e,[{key:"connectExternalInput",value:function(){this.connected=!0}}]),e}(ExternalInput),joystickInstance=null,Joystick=function(t){function e(){var t;_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return joystickInstance||(joystickInstance=n),t=joystickInstance,_possibleConstructorReturn(n,t)}return _inherits(e,t),_createClass(e,[{key:"connectExternalInput",value:function(){this.connected=!0}}]),e}(ExternalInput),Util=function t(){_classCallCheck(this,t)},annyangUtilInstance=null,AnnyangUtil=function(t){function e(){var t;_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return annyangUtilInstance||(n.languages={hebrew:"he",english:"en-US",arabic:"ar"},n.jsonData={lang:[{he:[{link:"עבור"},{button:"לחץ על"},{imgCloseModal:"סגור חלון"},{imgScrollModalDown:"למטה"},{imgScrollModalUp:"למעלה"},{exit:"יציאה"}],"en-US":[{link:"go to"},{button:"click on"},{imgCloseModal:"close window"},{imgScrollModalDown:"down"},{imgScrollModalUp:"up"},{exit:"exit"}]}]},n.userLanguages,annyangUtilInstance=n),t=annyangUtilInstance,_possibleConstructorReturn(n,t)}return _inherits(e,t),_createClass(e,[{key:"setLanguages",value:function(t){this.userLanguages=t}},{key:"initAnnyang",value:function(t){this.setLanguages(t),annyang&&(null!=t||void 0!=t?(console.log(t),annyang.setLanguage(this.languages[t])):annyang.setLanguage("he"),annyang.start(),annyang.debug())}},{key:"addAnnyangCommands",value:function(t){annyang.addCommands(t.commands)}},{key:"getLangObj",value:function(){if(null!=this.userLanguages||void 0!=this.userLanguages){console.log("getLangObj userLanguages"+this.userLanguages);sessionStorage.getItem("lang");return this.jsonData.lang[0][this.languages[this.userLanguages]]}return this.jsonData.lang[0].he}},{key:"addExitCommand",value:function(){var t={},e=this.getLangObj();for(var n in e)e[n].hasOwnProperty("exit")&&(t[e[n].exit]=function(){window.location.replace("index.html")});var i={commands:t};this.addAnnyangCommands(i)}}]),e}(Util),chatUtilInstance=null,ChatUtil=function(t){function e(){var t;_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return chatUtilInstance||(chatUtilInstance=n),t=chatUtilInstance,_possibleConstructorReturn(n,t)}return _inherits(e,t),_createClass(e,[{key:"initChat",value:function(t){var e,n=t,i=new WebSocket(n);i.onopen=function(t){$("#message_box").append('<div class="system_msg">Connected!</div>')},$("#send-btn").click(function(){var t=$("#message").val();if(""!=(e=$("#name").val()))if(""!=t){document.getElementById("name").style.visibility="hidden";var n=document.getElementById("message_box");n.scrollTop=n.scrollHeight;var o={message:t,name:e,color:"<?php echo $colours[$user_colour]; ?>"};i.send(JSON.stringify(o))}else alert("Enter Some message Please!");else alert("Enter your Name please!")}),i.onmessage=function(t){var n=JSON.parse(t.data),i=n.type,o=n.message,a=n.name,s=n.color;if("usermsg"==i&&null!=a&&($("#message_box").append('<div><span class="user_name" style="color:#'+s+'">'+a+'</span> : <span class="user_message">'+o+"</span></div>"),-1!=sessionStorage.getItem("utils").indexOf("ttv")&&a!=e)){var r=new SpeechSynthesisUtterance(a+"say"+o);r.lang="en-US",(new SpeechUtil).startSpeak(r)}"system"==i&&null!=o&&$("#message_box").append('<div class="system_msg">'+o+"</div>"),$("#message").val("");var c=document.getElementById("message_box");c.scrollTop=c.scrollHeight},i.onerror=function(t){$("#message_box").append('<div class="system_error">Error Occurred - '+t.data+"</div>")},i.onclose=function(t){$("#message_box").append('<div class="system_msg">Connection Closed</div>')}}}]),e}(Util),SpeechUtilInstance=null,SpeechUtil=function(t){function e(){var t;_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return SpeechUtilInstance||(n.languages={english:"en-US",france:"fr-FR"},n.SpeechUtilInstance=n,n.utterance=new SpeechSynthesisUtterance,n.annyangUtil=new AnnyangUtil,n.initAnnyang()),t=n.SpeechUtilInstance,_possibleConstructorReturn(n,t)}return _inherits(e,t),_createClass(e,[{key:"initSpeech",value:function(t){this.utterance.lang=null!=t||void 0!=t?this.languages[this.languages[t]]:"english"}},{key:"startSpeak",value:function(t){console.log("inside startSpeak"),window.speechSynthesis.speak(t)}},{key:"cancelSpeak",value:function(){window.speechSynthesis.cancel()}},{key:"chunkContents",value:function(t){for(var n=new e,i=new RegExp("^[\\s\\S]{"+Math.floor(60)+",120}[.!?,]{1}|^[\\s\\S]{1,120}$|^[\\s\\S]{1,120} "),o=[],a=t;a.length>0;)o.push(a.match(i)[0]),a=a.substring(o[o.length-1].length);var s=this.utterance;o.forEach(function(t){var e=t.trim();console.log(e),s.text=e,n.startSpeak(s)})}},{key:"read",value:function(t){var n=new e,i=new XMLHttpRequest;i.open("GET",t,!1);var o=this.utterance;i.onreadystatechange=function(){if(4===i.readyState&&(200===i.status||0==i.status)){for(var t=i.responseText,e=new RegExp("^[\\s\\S]{"+Math.floor(75)+",150}[.!?,]{1}|^[\\s\\S]{1,150}$|^[\\s\\S]{1,150} "),a=[],s=t;s.length>0;)a.push(s.match(e)[0]),s=s.substring(a[a.length-1].length);a.forEach(function(t){var e=t.trim();console.log(e),o.text=e,n.startSpeak(o)})}},i.send(null)}},{key:"initAnnyang",value:function(){var t={};t.stop=function(){window.speechSynthesis.cancel(),console.log("stop")};var e={commands:t};this.annyangUtil.addAnnyangCommands(e)}}]),e}(Util),accessibilityUtilInstance=null,AccessibilityUtil=function(t){function e(){var t;_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return accessibilityUtilInstance||(accessibilityUtilInstance=n),t=accessibilityUtilInstance,_possibleConstructorReturn(n,t)}return _inherits(e,t),_createClass(e,[{key:"initAccessibility",value:function(){}}]),e}(Util),boxModalUtilInstance=null,BoxModelUtil=function(t){function e(){var t;_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return boxModalUtilInstance||(n.annyangUtil=new AnnyangUtil,n.divModel=document.createElement("div"),n.divContent=document.createElement("div"),n.spanClose=document.createElement("span"),n.pararpghText=document.createElement("p"),n.initModal(),boxModalUtilInstance=n),t=boxModalUtilInstance,_possibleConstructorReturn(n,t)}return _inherits(e,t),_createClass(e,[{key:"initModal",value:function(){this.divModel.setAttribute("id","myModal"),this.divModel.setAttribute("class","modal"),this.divContent.setAttribute("class","modal-content"),this.spanClose.setAttribute("class","close"),this.spanClose.innerHTML="&times",this.pararpghText.setAttribute("class","content-paragraph modal-scroll"),this.pararpghText.innerHTML="",this.divContent.appendChild(this.spanClose),this.divContent.appendChild(this.pararpghText),this.divModel.appendChild(this.divContent),document.body.appendChild(this.divModel);document.getElementById("myModal");this.spanClose.onclick=function(){document.getElementById("myModal").style.display="none"},window.onclick=function(t){var e=document.getElementById("myModal");t.target==e&&(e.style.display="none",sessionStorage.scrollPosition=0,console.log("insied modal close "+sessionStorage.getItem("scrollPosition")),$(".modal-content").scrollTop(0))}}},{key:"setText",value:function(t){this.pararpghText.innerHTML="";for(var e=t.split("\n"),n=0;n<e.length;n++)this.pararpghText.innerHTML+=e[n],this.pararpghText.innerHTML+="<br>";this.divModel.style.display="block"}}]),e}(Util),Plugin=function t(){if(_classCallCheck(this,t),void 0===this.draw)throw new TypeError("Must override draw")},Chat=function(_Object){function Chat(t){_classCallCheck(this,Chat);var e=_possibleConstructorReturn(this,(Chat.__proto__||Object.getPrototypeOf(Chat)).call(this));return e.domElement=t,e.inputFactory=new InputFactory,e.buttonFactory=new ButtonFactory,e.chatUtil=new ChatUtil,e}return _inherits(Chat,_Object),_createClass(Chat,[{key:"draw",value:function draw(wsChatServer){this.domElement.innerHTML+='<div class="chatmain"><div class="messages"><div class="above"  id="message_box"></div><div class="bellow"><tg-input class="text" name="name" id="name" placeholder="Your Name" /></tg-input><tg-input class="text" name="message" id="message" placeholder="Message" /></tg-input><tg-button></tg-button></div></div><div class="loggedin"><section class="me"><img class="mypic" src="images/anyone.png"><p class="name">Me me: </p><p class="status">Online</hp></section><section class="others"></section></div><div class="clear"></div></div>';var inputOption={inputAttribute:{},commands:{name:{}}};this.options=eval(this.domElement.getAttribute("options"));for(var inputs=this.domElement.getElementsByTagName("tg-input"),i=0;i<inputs.length;i++){var attributes=inputs[i].attributes;for(0==i?(inputOption.commands.name.name=this.options.commands.name.name,inputOption.commands.name.func=this.options.commands.name.func):(inputOption.commands.name.name=this.options.commands.message.name,inputOption.commands.name.func=this.options.commands.message.func);inputs[i].attributes.length>0;){var attributeName=attributes[0].nodeName;inputOption.inputAttribute[attributeName]=attributes[0].nodeValue,inputs[i].removeAttribute(attributeName)}this.inputFactory.createObject(inputs[i],inputOption)}var tgButton=this.domElement.getElementsByTagName("tg-button"),buttonSend={buttonAttribute:{id:"send-btn",class:"send"},buttonValue:"send",onClickFunc:{}};buttonSend.onClickFunc.func=this.options.onClickFunc.func,this.buttonFactory.createObject(tgButton[0],buttonSend),this.chatUtil.initChat(wsChatServer)}}]),Chat}(Object),Login=function(_Plugin){function Login(t){_classCallCheck(this,Login);var e=_possibleConstructorReturn(this,(Login.__proto__||Object.getPrototypeOf(Login)).call(this));return e.domElement=t,e.inputFactory=new InputFactory,e.buttonFactory=new ButtonFactory,e}return _inherits(Login,_Plugin),_createClass(Login,[{key:"draw",value:function draw(){try{if(this.options=eval(this.domElement.getAttribute("options")),void 0==this.options)throw"Exception: Can't init tg-accessibility, option attribute is undefined";if(this.options.labels){this.domElement.innerHTML+="<label> </label><label> </label>";var labels=this.domElement.getElementsByTagName("label"),labelChild=0;for(var label in this.options.labels)labels[labelChild].innerHTML+=this.options.labels[label],labels[labelChild++].innerHTML+="<tg-input></tg-input>";this.domElement.innerHTML+="<tg-button></tg-button>"}else this.domElement.innerHTML+="<tg-input></tg-input><tg-input></tg-input><tg-button></tg-button>";for(var textInput={inputAttribute:{type:"text"},commands:{name:{}}},passInput={inputAttribute:{type:"password"},commands:{name:{}}},inputs=this.domElement.getElementsByTagName("tg-input"),i=0;i<inputs.length;i++)0==i?(textInput.commands.name.name=this.options.commands.username.name,textInput.commands.name.func=this.options.commands.username.func,this.inputFactory.createObject(inputs[i],textInput)):(passInput.commands.name.name=this.options.commands.password.name,passInput.commands.name.func=this.options.commands.password.func,this.inputFactory.createObject(inputs[i],passInput));if(this.options.buttonValue&&this.options.commands.submit||this.options.buttonValue&&this.options.onClickFunc){var tgButton=this.domElement.getElementsByTagName("tg-button");if(this.options.commands.submit){var buttonLogin={buttonAttribute:{},buttonValue:this.options.buttonValue,commands:{submit:{}}};buttonLogin.commands.submit.name=this.options.commands.submit.name,buttonLogin.commands.submit.func=this.options.commands.submit.func}else{var buttonLogin={buttonAttribute:{},buttonValue:this.options.buttonValue,onClickFunc:{}};buttonLogin.onClickFunc.func=this.options.onClickFunc.func}this.buttonFactory.createObject(tgButton[0],buttonLogin)}}catch(t){console.log(t)}}}]),Login}(Plugin),Library=function(_Object2){function Library(t){_classCallCheck(this,Library);var e=_possibleConstructorReturn(this,(Library.__proto__||Object.getPrototypeOf(Library)).call(this));return e.domElement=t,e.imgFactory=new ImgFactory,e}return _inherits(Library,_Object2),_createClass(Library,[{key:"draw",value:function draw(){try{var options=eval(this.domElement.getAttribute("options"));if(void 0==this.options)throw"Exception: Can't init tg-library, option attribute is undefined";var libraryContainer=document.createElement("div");libraryContainer.setAttribute("class","tg-library-books");for(var propertyName in options){var divStory=document.createElement("div");divStory.setAttribute("class","tg-library-story");var bookHeader=document.createElement("h5");bookHeader.setAttribute("class","tg-library-header");var tgImg=document.createElement("tg-img"),libraryImg={imgAttribute:{},path:"",img:"",voiceCommand:""};for(var propertyAtrr in options[propertyName].imgAttribute)libraryImg.imgAttribute[propertyAtrr]=options[propertyName].imgAttribute[propertyAtrr];libraryImg.path=options[propertyName].path,libraryImg.img=options[propertyName].img,libraryImg.voiceCommand=options[propertyName].voiceCommand,bookHeader.innerHTML+=options[propertyName].voiceCommand,this.imgFactory.createObject(tgImg,libraryImg),divStory.appendChild(bookHeader),divStory.appendChild(tgImg),libraryContainer.appendChild(divStory)}this.domElement.appendChild(libraryContainer)}catch(t){console.log(t)}}}]),Library}(Object),Accessibility=function(_Plugin2){function Accessibility(t){_classCallCheck(this,Accessibility);var e=_possibleConstructorReturn(this,(Accessibility.__proto__||Object.getPrototypeOf(Accessibility)).call(this));return e.domElement=t,e.buttonFactory=new ButtonFactory,e.liFactory=new LiFactory,e.jsonData={objects:[{id:"bigger_font",text:"הגדל ונט",img:"images/accessibility/bigFont.png",func:"var divtxt = document.querySelector('body > div:not(#acc_panel)');var curSize  = window.getComputedStyle(divtxt, null).getPropertyValue('font-size');var newSize = parseInt(curSize.replace('px', '')) + 1;divtxt.style.fontSize = newSize + 'px';"},{id:"smaller_font",text:"הקטן פונט",img:"images/accessibility/smallFont.png",func:"var divtxt = document.querySelector('body > div:not(#acc_panel)');var curSize  = window.getComputedStyle(divtxt, null).getPropertyValue('font-size');var newSize = parseInt(curSize.replace('px', '')) - 1;if (newSize <= 10) {newSize = 10+ 'px';}divtxt.style.fontSize = newSize + 'px';"},{id:"legible_font",text:"פונט קריא",img:"images/accessibility/legibleFont.png",func:"$('body').toggleClass('lfont');"},{id:"bright_Contrast",text:"בהירות בהירה",img:"images/accessibility/brightContrast.png",func:"$('body,nav,main,header,section,article,footer,div,button').toggleClass('bc_blocks');$('main,header,footer,div,button').toggleClass('bc_border');$('h1,h2,h3,h4,h5,h6,span,label').toggleClass('bc_headers');$('a').toggleClass('bc_links');$('img,svg').toggleClass('bc_image');"},{id:"impared",text:"בהירות כהה",img:"images/accessibility/darkContrast.png",func:"$('body,main,nav,header,section,article,footer,div').toggleClass('vi_whitefont');$('h1,h2,h3,h4,h5,h6,span,label,button').toggleClass('vi_yellowfont');$('a').toggleClass('vi_link');$('img,svg').toggleClass('vi_image');"},{id:"color_blind",text:"עוורי ראייה",img:"images/accessibility/colorBlind.png",func:"$('body,img').toggleClass('cb_grayscale');$('body,main').toggleClass('cb_bodyWhite');"},{id:"blackCursor",text:"סמן שחור",img:"images/accessibility/blackCursor.png",func:"$('body').toggleClass('black_cursor');"},{id:"whiteCursor",text:"סמן לבן",img:"images/accessibility/whiteCursor.png",func:"$('body').toggleClass('white_cursor');"},{id:"magnifier",text:"זכוכית מגדלת",img:"images/accessibility/magni.png",func:"$('.wrapper').toggleClass('largeBodyFonts');$('header,#question,.buttonGame').toggleClass('lfonts');$('.row_activity').toggleClass('largeB');$('.container').toggleClass('largef');$('.snow-globe').toggleClass('largeSnowGlobe');$('.bottom').toggleClass('largeSnowBottom');$('.cell img').toggleClass('largeimg');"},{id:"imagesDescriptions",text:"תיאור לתמונות",img:"images/accessibility/imagesDes.png",func:"if(flag ==0){iDescriptions();$('#text').css('display','block');}else{flag =0;$('#text').css('display','none');}"},{id:"hightlightTitles",text:"הדגשת כותרות",img:"images/accessibility/hightlightTitles.png",func:"$('h1,h2,h3,h4,h5,h6').toggleClass('hightlight_titles');"},{id:"hightlightLinks",text:"הדגשת קישורים",img:"images/accessibility/links.png",func:"$('a').toggleClass('hightlight_Links');"}]},e}return _inherits(Accessibility,_Plugin2),_createClass(Accessibility,[{key:"draw",value:function draw(){var _this13=this,tgButtonElement=document.createElement("tg-button");this.domElement.appendChild(tgButtonElement);var divAccPanel=document.createElement("div");divAccPanel.setAttribute("id","acc_panel"),this.domElement.appendChild(divAccPanel);var divHeader=document.createElement("div");divHeader.setAttribute("class","header_panel");var ulHeader=document.createElement("ul");divAccPanel.appendChild(divHeader),divHeader.appendChild(ulHeader);var tgLButtonClose=document.createElement("tg-button");ulHeader.appendChild(tgLButtonClose);var buttonClose={liAttribute:{id:"hide_panel"},buttonValue:"Close",commands:{submit:{}}};buttonClose.commands.submit.name="close accessibility",buttonClose.commands.submit.func=function(){$("#acc_panel").hide()},this.buttonFactory.createObject(tgLButtonClose,buttonClose);var headerAccess=document.createElement("h3");headerAccess.innerHTML+="Accessibility",divHeader.appendChild(headerAccess);var select=document.createElement("select");select.setAttribute("id","lang"),divHeader.appendChild(select);var select1=document.createElement("option"),select2=document.createElement("option"),select3=document.createElement("option"),select4=document.createElement("option");select1.innerHTML+="English",select2.innerHTML+="ألعربيه",select3.innerHTML+="עברית",select4.innerHTML+="русский",select.appendChild(select1),select.appendChild(select2),select.appendChild(select3),select.appendChild(select4);var divButtonPanel=document.createElement("div");divButtonPanel.setAttribute("class","buttons_panel"),divAccPanel.appendChild(divButtonPanel),console.log(this.jsonData),console.log(this.jsonData.objects.length);for(var div_row_panel,row3_panel,ul,_loop=function _loop(){tgLi=document.createElement("tg-li"),0!=index&&3!=index&&6!=index||((div_row_panel=document.createElement("div")).setAttribute("class","row_panel"),divButtonPanel.appendChild(div_row_panel),(row3_panel=document.createElement("div")).setAttribute("class","row3_panel"),div_row_panel.appendChild(row3_panel),ul=document.createElement("ul"),row3_panel.appendChild(ul));var li={liAttribute:{id:_this13.jsonData.objects[index].id,text:_this13.jsonData.objects[index].text},commands:{submit:{}}},self=_this13.jsonData.objects[index].func;li.commands.submit.name=_this13.jsonData.objects[index].text,li.commands.submit.func=function(){eval(self)},_this13.liFactory.createObject(tgLi,li);var img=document.createElement("img");img.setAttribute("src",_this13.jsonData.objects[index].img),(liChild=tgLi.firstChild).appendChild(img),ul.appendChild(tgLi)},index=0;index<this.jsonData.objects.length;index++){var tgLi,liChild;_loop()}var tgLi=document.createElement("tg-li");(div_row_panel=document.createElement("div")).setAttribute("class","row_panel"),divButtonPanel.appendChild(div_row_panel),(row3_panel=document.createElement("div")).setAttribute("class","row3_panel"),div_row_panel.appendChild(row3_panel);var tgButton=this.domElement.getElementsByTagName("tg-button"),buttonAccess={buttonAttribute:{id:"acc_logo"},commands:{submit:{}}};buttonAccess.commands.submit.name="נגישות",buttonAccess.commands.submit.func=function(){$("#acc_panel").toggle(),console.log("tg-button")},this.buttonFactory.createObject(tgButton[0],buttonAccess)}}]),Accessibility}(Plugin),Menu=function(_Plugin3){function Menu(t){_classCallCheck(this,Menu);var e=_possibleConstructorReturn(this,(Menu.__proto__||Object.getPrototypeOf(Menu)).call(this));return e.domElement=t,e.linkFactory=new LinkFactory,e}return _inherits(Menu,_Plugin3),_createClass(Menu,[{key:"draw",value:function draw(){try{if(this.options=eval(this.domElement.getAttribute("options")),void 0==this.options)throw"Exception: Can't init tg-menu, option attribute is undefined";var nav=document.createElement("nav"),ul=document.createElement("ul");ul.setAttribute("class","tg-ul");for(var propertyName in this.options){var li=document.createElement("li");li.setAttribute("class","tg-li");var a=document.createElement("tg-a"),menuOptions={link:{}};for(var propertyAtrr in this.options[propertyName])menuOptions.link[propertyAtrr]=this.options[propertyName][propertyAtrr];this.linkFactory.createObject(a,menuOptions),li.appendChild(a),ul.appendChild(li)}nav.appendChild(ul),this.domElement.appendChild(nav)}catch(t){console.log(t)}}}]),Menu}(Plugin),Game=function(t){function e(t){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.domElement=t,n.linkFactory=new LinkFactory,n.questions={questions:[{question:"Which picture shows Shrek?",choices:["shrek","pooh","dog","thing"],correctAnswer:0},{question:"Which picture shows an Owl?",choices:["Penguin","Flamingo","Owl","Quetzal"],correctAnswer:2},{question:"Which picture shows a fruit?",choices:["Brocoli","Carrots","Apple","Paprika"],correctAnswer:2},{question:"Which picture shows the answer of 2+2?",choices:["8","4","6","5"],correctAnswer:1},{question:"Which picture shows a Quetzal?",choices:["8","4","6","5"],correctAnswer:2}]},n.questionCounter=0,n.selections=[],n.questions,n.quiz=$("#quiz"),n}return _inherits(e,t),_createClass(e,[{key:"draw",value:function(){var t=document.createElement("div");t.setAttribute("id","quiz"),this.domElement.appendChild(t);var e=document.createElement("div");e.setAttribute("class","buttonGame"),e.setAttribute("id","next"),this.domElement.appendChild(e);var n=document.createElement("div");n.setAttribute("class","buttonGame"),n.setAttribute("id","prev"),this.domElement.appendChild(n);var i=document.createElement("div");i.setAttribute("class","buttonGame"),i.setAttribute("id","start"),this.domElement.appendChild(i);var o=document.createElement("tg-a");e.appendChild(o);var a={link:{href:"#",text:"Next"}};this.linkFactory.createObject(o,a);var s=document.createElement("tg-a");n.appendChild(s);var r={link:{href:"#",text:"Prev"}};this.linkFactory.createObject(s,r);var c=document.createElement("tg-a");i.appendChild(c);var l={link:{href:"#",text:"Start Over"}};this.linkFactory.createObject(c,l),this.displayNext(),$("#next").on("click",function(t){if(t.preventDefault(),this.quiz.is(":animated"))return!1;this.choose(),isNaN(this.selections[this.questionCounter])?alert("Please make a selection!"):(this.questionCounter++,this.displayNext())}),$("#prev").on("click",function(t){if(t.preventDefault(),this.quiz.is(":animated"))return!1;this.choose(),this.questionCounter--,this.displayNext()}),$("#start").on("click",function(t){if(t.preventDefault(),this.quiz.is(":animated"))return!1;this.questionCounter=0,this.selections=[],this.displayNext(),$("#start").hide()}),$(".buttonGame").on("mouseenter",function(){$(this).addClass("active")}),$(".buttonGame").on("mouseleave",function(){$(this).removeClass("active")})}},{key:"createQuestionElement",value:function(t){var e=$("<div>",{id:"question"}),n=$("<h4>Question "+(t+1)+"</h4>");e.append(n);var i=$("<h3>").append(this.questions[t].question);e.append(i);var o=this.createRadios(t);return e.append(o),e}},{key:"createRadios",value:function(t){for(var e=$("<div>",{class:"row"}),n="",i=0;i<this.questions[t].choices.length;i++)n='<label class="cell"><input type="radio" name="answer" value='+i+" /> "+(i+1)+'.   <img src="images/quez/'+this.questions[t].choices[i]+'.jpg" width="40%" alt='+this.questions[t].choices[i]+" /></label>",e.append(n);return e}},{key:"choose",value:function(){this.selections[this.questionCounter]=+$('input[name="answer"]:checked').val()}},{key:"displayScore",value:function(){for(var t=$("<p>",{class:"score"}),e=0,n=0;n<this.selections.length;n++)this.selections[n]===this.questions[n].correctAnswer&&e++;return t.append("You got "+e+" questions out of "+this.questions.length+" right!!!"),t}},{key:"displayNext",value:function(){this.quiz.fadeOut(function(){if($("#question").remove(),this.questionCounter<this.questions.length){var t=this.createQuestionElement(questionCounter);this.quiz.append(t).fadeIn(),isNaN(this.selections[this.questionCounter])||$("input[value="+this.selections[this.questionCounter]+"]").prop("checked",!0),1===this.questionCounter?$("#prev").show():0===this.questionCounter&&($("#prev").hide(),$("#next").show())}else{var e=this.displayScore();this.quiz.append(e).fadeIn(),$("#next").hide(),$("#prev").hide(),$("#start").show()}})}}]),e}(Object),PluginFactory=function t(){if(_classCallCheck(this,t),void 0===this.createPlugin)throw new TypeError("Must override createPlugin")},loginFactoryInstance=null,LoginFactory=function(_PluginFactory){function LoginFactory(){var t;_classCallCheck(this,LoginFactory);var e=_possibleConstructorReturn(this,(LoginFactory.__proto__||Object.getPrototypeOf(LoginFactory)).call(this));return loginFactoryInstance||(loginFactoryInstance=e,e.annyangUtil=new AnnyangUtil),t=loginFactoryInstance,_possibleConstructorReturn(e,t)}return _inherits(LoginFactory,_PluginFactory),_createClass(LoginFactory,[{key:"createPlugin",value:function createPlugin(domElement){var login=new Login(domElement);return this.options=eval(domElement.getAttribute("options")),login.draw(),login}}]),LoginFactory}(PluginFactory),chatFactoryInstance=null,ChatFactory=function(_PluginFactory2){function ChatFactory(){var t;_classCallCheck(this,ChatFactory);var e=_possibleConstructorReturn(this,(ChatFactory.__proto__||Object.getPrototypeOf(ChatFactory)).call(this));return chatFactoryInstance||(chatFactoryInstance=e),t=chatFactoryInstance,_possibleConstructorReturn(e,t)}return _inherits(ChatFactory,_PluginFactory2),_createClass(ChatFactory,[{key:"createPlugin",value:function createPlugin(domElement){var chat=new Chat(domElement);return this.options=eval(domElement.getAttribute("options")),chat.draw(this.options.wsURL),chat}}]),ChatFactory}(PluginFactory),menuFactoryInstance=null,MenuFactory=function(_PluginFactory3){function MenuFactory(){var t;_classCallCheck(this,MenuFactory);var e=_possibleConstructorReturn(this,(MenuFactory.__proto__||Object.getPrototypeOf(MenuFactory)).call(this));return menuFactoryInstance||(menuFactoryInstance=e),t=menuFactoryInstance,_possibleConstructorReturn(e,t)}return _inherits(MenuFactory,_PluginFactory3),_createClass(MenuFactory,[{key:"createPlugin",value:function createPlugin(domElement){var menu=new Menu(domElement);return this.options=eval(domElement.getAttribute("options")),menu.draw(),menu}}]),MenuFactory}(PluginFactory),libraryFactoryInstance=null,LibraryFactory=function(_PluginFactory4){function LibraryFactory(){var t;_classCallCheck(this,LibraryFactory);var e=_possibleConstructorReturn(this,(LibraryFactory.__proto__||Object.getPrototypeOf(LibraryFactory)).call(this));return libraryFactoryInstance||(libraryFactoryInstance=e,e.annyangUtil=new AnnyangUtil),t=libraryFactoryInstance,_possibleConstructorReturn(e,t)}return _inherits(LibraryFactory,_PluginFactory4),_createClass(LibraryFactory,[{key:"createPlugin",value:function createPlugin(domElement){var library=new Library(domElement);return this.options=eval(domElement.getAttribute("options")),library.draw(),library}}]),LibraryFactory}(PluginFactory),accessibilityFactoryInstance=null,AccessibilityFactory=function(_PluginFactory5){function AccessibilityFactory(){var t;_classCallCheck(this,AccessibilityFactory);var e=_possibleConstructorReturn(this,(AccessibilityFactory.__proto__||Object.getPrototypeOf(AccessibilityFactory)).call(this));return accessibilityFactoryInstance||(accessibilityFactoryInstance=e,e.annyangUtil=new AnnyangUtil),t=accessibilityFactoryInstance,_possibleConstructorReturn(e,t)}return _inherits(AccessibilityFactory,_PluginFactory5),_createClass(AccessibilityFactory,[{key:"createPlugin",value:function createPlugin(domElement){var accessibility=new Accessibility(domElement);return this.options=eval(domElement.getAttribute("options")),accessibility.draw(),accessibility}}]),AccessibilityFactory}(PluginFactory),gameFactoryInstance=null,GameFactory=function(_PluginFactory6){function GameFactory(){var t;_classCallCheck(this,GameFactory);var e=_possibleConstructorReturn(this,(GameFactory.__proto__||Object.getPrototypeOf(GameFactory)).call(this));return gameFactoryInstance||(gameFactoryInstance=e,e.annyangUtil=new AnnyangUtil),t=gameFactoryInstance,_possibleConstructorReturn(e,t)}return _inherits(GameFactory,_PluginFactory6),_createClass(GameFactory,[{key:"createPlugin",value:function createPlugin(domElement){var game=new Game(domElement);return this.options=eval(domElement.getAttribute("options")),game.draw(),game}}]),GameFactory}(PluginFactory),ObjectFactory=function t(){if(_classCallCheck(this,t),void 0===this.createObject)throw new TypeError("Must override createObject");if(void 0===this.initUtils)throw new TypeError("Must override initUtils")},inputFactoryInstance=null,InputFactory=function(_ObjectFactory){function InputFactory(t){var e;_classCallCheck(this,InputFactory);var n=_possibleConstructorReturn(this,(InputFactory.__proto__||Object.getPrototypeOf(InputFactory)).call(this));return n.gatherApiObject=t,inputFactoryInstance||(inputFactoryInstance=n,n.annyangUtil=new AnnyangUtil),e=inputFactoryInstance,_possibleConstructorReturn(n,e)}return _inherits(InputFactory,_ObjectFactory),_createClass(InputFactory,[{key:"createObject",value:function createObject(domElement,options){var inputText=void 0;return null==options||void 0==options?(this.options=eval(domElement.getAttribute("options")),(inputText=new InputText(domElement)).draw(null),-1!=this.gatherApiObject.requiredUtills.indexOf("voice command")&&this.initUtils()):(this.options=options,(inputText=new InputText(domElement)).draw(this.options),-1!=this.gatherApiObject.requiredUtills.indexOf("voice command")&&this.initUtils()),this.gatherApiObject.objects.push(inputText),inputText}},{key:"initUtils",value:function(){this.initAnnyang()}},{key:"initAnnyang",value:function(){var t={};for(var e in this.options.commands)t[this.options.commands[e].name]=this.options.commands[e].func;var n={commands:t};this.annyangUtil.addAnnyangCommands(n)}}]),InputFactory}(ObjectFactory),TGObject=function t(){if(_classCallCheck(this,t),void 0===this.draw)throw new TypeError("Must override draw");if(void 0===this.enableTobii)throw new TypeError("Must override draw");if(void 0===this.enablejoystick)throw new TypeError("Must override draw");if(void 0===this.enableClickers)throw new TypeError("Must override draw")},InputText=function(_TGObject){function InputText(t){_classCallCheck(this,InputText);var e=_possibleConstructorReturn(this,(InputText.__proto__||Object.getPrototypeOf(InputText)).call(this));return e.domElement=t,e}return _inherits(InputText,_TGObject),_createClass(InputText,[{key:"draw",value:function draw(options){var input=void 0;null==options||void 0==options?(this.options=eval(this.domElement.getAttribute("options")),input=this.initInput()):(this.options=options,input=this.initInput()),this.domElement.appendChild(input)}},{key:"initInput",value:function(){var t=document.createElement("input");if(this.options.inputAttribute)for(var e in this.options.inputAttribute)t.setAttribute(e,this.options.inputAttribute[e]);return t}},{key:"enableTobii",value:function(){}},{key:"enablejoystick",value:function(t){$("#"+this.options.inputAttribute.id).keyboard({layout:t})}},{key:"enableClickers",value:function(){}}]),InputText}(TGObject),Li=function(_TGObject2){function Li(t){_classCallCheck(this,Li);var e=_possibleConstructorReturn(this,(Li.__proto__||Object.getPrototypeOf(Li)).call(this));return e.domElement=t,e.annyangUtil=new AnnyangUtil,e}return _inherits(Li,_TGObject2),_createClass(Li,[{key:"draw",value:function draw(options){var li=void 0;null==options||void 0==options?(this.options=eval(this.domElement.getAttribute("options")),li=this.initLi()):(this.options=options,li=this.initLi()),this.domElement.appendChild(li)}},{key:"initLi",value:function(){var t=document.createElement("li");if(this.options.liAttribute)for(var e in this.options.liAttribute)"text"==e&&(t.innerHTML+=this.options.liAttribute[e]),t.setAttribute(e,this.options.liAttribute[e]);return this.options.commands&&(t.onclick=this.options.commands.submit.func),t}},{key:"enableTobii",value:function(){}},{key:"enablejoystick",value:function(){}},{key:"enableClickers",value:function(){}}]),Li}(TGObject),Button=function(_TGObject3){function Button(t){_classCallCheck(this,Button);var e=_possibleConstructorReturn(this,(Button.__proto__||Object.getPrototypeOf(Button)).call(this));return e.domElement=t,e}return _inherits(Button,_TGObject3),_createClass(Button,[{key:"draw",value:function draw(options){var button=void 0;null==options||void 0==options?(this.options=eval(this.domElement.getAttribute("options")),button=this.initButton()):(this.options=options,button=this.initButton()),this.domElement.appendChild(button)}},{key:"enableTobii",value:function(){this.button.classList.add("btn-lg")}},{key:"enablejoystick",value:function(){}},{key:"initButton",value:function(){if(this.button=document.createElement("button"),this.options.buttonAttribute)for(var t in this.options.buttonAttribute)this.button.setAttribute(t,this.options.buttonAttribute[t]);return this.options.buttonValue&&(this.button.innerHTML=this.options.buttonValue),this.options.onClickFunc?this.button.onclick=this.options.onClickFunc.func:this.options.commands&&(this.button.onclick=this.options.commands.submit.func),this.button}},{key:"enableClickers",value:function(){}}]),Button}(TGObject),Link=function(_TGObject4){function Link(t){_classCallCheck(this,Link);var e=_possibleConstructorReturn(this,(Link.__proto__||Object.getPrototypeOf(Link)).call(this));return e.domElement=t,e}return _inherits(Link,_TGObject4),_createClass(Link,[{key:"draw",value:function draw(options){var link=void 0;null==options||void 0==options?(this.options=eval(this.domElement.getAttribute("options")),this.link=this.initLink()):(this.options=options,this.link=this.initLink()),this.domElement.appendChild(this.link)}},{key:"initLink",value:function(){var t=document.createElement("a");for(var e in this.options)for(var n in this.options[e])"text"==n?t.innerHTML=this.options[e][n]:"commandTrigger"==n||t.setAttribute(n,this.options[e][n]);return t}},{key:"enableTobii",value:function(){this.link.style.fontSize="2em",console.log("li tobi")}},{key:"enablejoystick",value:function(){}},{key:"enableClickers",value:function(){}}]),Link}(TGObject),Paragraph=function(_TGObject5){function Paragraph(t){_classCallCheck(this,Paragraph);var e=_possibleConstructorReturn(this,(Paragraph.__proto__||Object.getPrototypeOf(Paragraph)).call(this));return e.domElement=t,e}return _inherits(Paragraph,_TGObject5),_createClass(Paragraph,[{key:"draw",value:function draw(options){var paragraph=void 0;null==options||void 0==options?(this.options=eval(this.domElement.getAttribute("options")),paragraph=this.initpPragraph()):(this.options=options,paragraph=this.initpPragraph()),this.domElement.appendChild(paragraph)}},{key:"initpPragraph",value:function(){var t=document.createElement("p");return t.innerHTML=this.options.commands.content,t}},{key:"enableTobii",value:function(){}},{key:"enablejoystick",value:function(){}},{key:"enableClickers",value:function(){}}]),Paragraph}(TGObject),Img=function(_TGObject6){function Img(t,e){_classCallCheck(this,Img);var n=_possibleConstructorReturn(this,(Img.__proto__||Object.getPrototypeOf(Img)).call(this));return n.domElement=t,n.annyangUtil=new AnnyangUtil,n.speechUtil=new SpeechUtil,n.boxModal=new BoxModelUtil,n.gatherApiObject=e,n}return _inherits(Img,_TGObject6),_createClass(Img,[{key:"draw",value:function draw(options){var img=void 0;null==options||void 0==options?(this.options=eval(this.domElement.getAttribute("options")),img=this.initImage()):(this.options=options,img=this.initImage()),this.domElement.appendChild(img)}},{key:"initImage",value:function(){a=this;if(this.img=document.createElement("img"),this.options.imgAttribute)for(var t in this.options.imgAttribute)this.img.setAttribute(t,this.options.imgAttribute[t]);if(this.options.img&&this.img.setAttribute("src",this.options.img),this.options.path){var e=this.options.path;this.img.onclick=function(){document.getElementsByClassName("content-paragraph").innerHTML+="";var t=new XMLHttpRequest;t.open("GET",e,!1),t.onreadystatechange=function(){if(4===t.readyState&&(200===t.status||0==t.status)){var e=t.responseText;a.boxModal.setText(e)}},t.send(null)}}var n={};if(-1!=this.gatherApiObject.requiredUtills.indexOf("voice command")){if(this.options.path){if(sessionStorage.scrollPosition=0,this.options.voiceCommand){this.options.voiceCommand;n[this.options.voiceCommand]=function(){a.img.click()}}var i=this.annyangUtil.getLangObj();for(var o in i)i[o].hasOwnProperty("imgCloseModal")?n[i[o].imgCloseModal]=function(){document.getElementById("myModal").style.display="none",sessionStorage.scrollPosition=0,console.log("insied modal close "+sessionStorage.getItem("scrollPosition")),$(".modal-content").scrollTop(0)}:i[o].hasOwnProperty("imgScrollModalDown")&&(n[i[o].imgScrollModalDown]=function(){var t=parseInt(sessionStorage.getItem("scrollPosition"));console.log(t+" before"),t+=50,sessionStorage.scrollPosition=t,console.log(t+" after"),$(".modal-content").scrollTop(t)})}}else{var a=this,s=this.options.path;if(this.options.path&&this.options.voiceCommand){this.options.voiceCommand;n[this.options.voiceCommand]=function(){a.speechUtil.read(s)}}}var r={commands:n};return this.annyangUtil.addAnnyangCommands(r),this.img}},{key:"enableTobii",value:function(){this.img.style.transform="scale(2)",console.log("img tobi")}},{key:"enablejoystick",value:function(){}},{key:"enableClickers",value:function(){}}]),Img}(TGObject),buttonFactoryInstance=null,ButtonFactory=function(_ObjectFactory2){function ButtonFactory(t){var e;_classCallCheck(this,ButtonFactory);var n=_possibleConstructorReturn(this,(ButtonFactory.__proto__||Object.getPrototypeOf(ButtonFactory)).call(this));return n.gatherApiObject=t,buttonFactoryInstance||(buttonFactoryInstance=n,n.annyangUtil=new AnnyangUtil),e=buttonFactoryInstance,_possibleConstructorReturn(n,e)}return _inherits(ButtonFactory,_ObjectFactory2),_createClass(ButtonFactory,[{key:"createObject",value:function createObject(domElement,options){var button=void 0;return null==options||void 0==options?(this.options=eval(domElement.getAttribute("options")),(button=new Button(domElement)).draw(),-1!=this.gatherApiObject.requiredUtills.indexOf("voice command")&&this.initUtils()):(this.options=options,(button=new Button(domElement)).draw(this.options),-1!=this.gatherApiObject.requiredUtills.indexOf("voice command")&&this.initUtils()),this.gatherApiObject.objects.push(button),button}},{key:"initUtils",value:function(){this.initAnnyang()}},{key:"initAnnyang",value:function(){var t={};if(this.options.commands)for(var e in this.options.commands)t[this.options.commands[e].name]=this.options.commands[e].func;else if(this.options.onClickFunc){var n=this.annyangUtil.getLangObj();for(var i in n)n[i].hasOwnProperty("button")&&(t[n[i].button+" "+this.options.buttonValue]=this.options.onClickFunc.func)}var o={commands:t};this.annyangUtil.addAnnyangCommands(o)}}]),ButtonFactory}(ObjectFactory),linkFactoryInstance=null,LinkFactory=function(_ObjectFactory3){function LinkFactory(t){var e;_classCallCheck(this,LinkFactory);var n=_possibleConstructorReturn(this,(LinkFactory.__proto__||Object.getPrototypeOf(LinkFactory)).call(this));return n.gatherApiObject=t,linkFactoryInstance||(linkFactoryInstance=n,n.annyangUtil=new AnnyangUtil),e=linkFactoryInstance,_possibleConstructorReturn(n,e)}return _inherits(LinkFactory,_ObjectFactory3),_createClass(LinkFactory,[{key:"createObject",value:function createObject(domElement,options){var link=void 0;return null==options||void 0==options?(this.options=eval(domElement.getAttribute("options")),(link=new Link(domElement)).draw(null),-1!=this.gatherApiObject.requiredUtills.indexOf("voice command")&&this.initUtils()):(this.options=options,(link=new Link(domElement)).draw(this.options),-1!=this.gatherApiObject.requiredUtills.indexOf("voice command")&&this.initUtils()),this.gatherApiObject.objects.push(link),link}},{key:"initUtils",value:function(){this.initAnnyang()}},{key:"initAnnyang",value:function(){var t=this,e={};for(var n in this.options)if(this.options[n].commandTrigger)!function(){var i=t.options[n].href;e[t.options[n].commandTrigger]=function(){window.location.replace(i)}}();else if(this.options[n].href){var i=this.annyangUtil.getLangObj();for(var o in i)i[o].hasOwnProperty("link")&&function(){var a=t.options[n].href;e[i[o].link+" "+t.options[n].text]=function(){window.location.replace(a)}}()}var a={commands:e};this.annyangUtil.addAnnyangCommands(a)}}]),LinkFactory}(ObjectFactory),liFactoryInstance=null,LiFactory=function(_ObjectFactory4){function LiFactory(t){var e;_classCallCheck(this,LiFactory);var n=_possibleConstructorReturn(this,(LiFactory.__proto__||Object.getPrototypeOf(LiFactory)).call(this));return n.gatherApiObject=t,liFactoryInstance||(liFactoryInstance=n,n.annyangUtil=new AnnyangUtil),e=liFactoryInstance,_possibleConstructorReturn(n,e)}return _inherits(LiFactory,_ObjectFactory4),_createClass(LiFactory,[{key:"createObject",value:function createObject(domElement,options){var li=void 0;return null==options||void 0==options?(this.options=eval(domElement.getAttribute("options")),(li=new Li(domElement)).draw(),-1!=this.gatherApiObject.requiredUtills.indexOf("voice command")&&this.initUtils()):(this.options=options,(li=new Li(domElement)).draw(this.options),-1!=this.gatherApiObject.requiredUtills.indexOf("voice command")&&this.initUtils()),this.gatherApiObject.objects.push(li),li}},{key:"initUtils",value:function(){this.initAnnyang()}},{key:"initAnnyang",value:function(){var t={};if(this.options.commands)for(var e in this.options.commands)t[this.options.commands[e].name]=this.options.commands[e].func;var n={commands:t};this.annyangUtil.addAnnyangCommands(n)}}]),LiFactory}(ObjectFactory),paragraphFactoryInstance=null,ParagraphFactory=function(_ObjectFactory5){function ParagraphFactory(t){var e;_classCallCheck(this,ParagraphFactory);var n=_possibleConstructorReturn(this,(ParagraphFactory.__proto__||Object.getPrototypeOf(ParagraphFactory)).call(this));return n.gatherApiObject=t,paragraphFactoryInstance||(paragraphFactoryInstance=n,n.annyangUtil=new AnnyangUtil,n.SpeechUtils=new SpeechUtil),e=paragraphFactoryInstance,_possibleConstructorReturn(n,e)}return _inherits(ParagraphFactory,_ObjectFactory5),_createClass(ParagraphFactory,[{key:"createObject",value:function createObject(domElement,options){var paragraph=void 0;return null==options||void 0==options?(this.options=eval(domElement.getAttribute("options")),(paragraph=new Paragraph(domElement)).draw(null),-1!=this.gatherApiObject.requiredUtills.indexOf("voice command")&&this.initUtils()):(this.options=options,(paragraph=new Paragraph(domElement)).draw(this.options),-1!=this.gatherApiObject.requiredUtills.indexOf("voice command")&&this.initUtils()),this.gatherApiObject.objects.push(paragraph),paragraph}},{key:"initUtils",value:function(){this.initAnnyang()}},{key:"initAnnyang",value:function(){var t={},e=this.options.commands.content,n=this.SpeechUtils;t[this.options.commands.commandTrigger]=function(){n.chunkContents(e)};var i={commands:t};this.annyangUtil.addAnnyangCommands(i)}}]),ParagraphFactory}(ObjectFactory),imgFactoryInstance=null,ImgFactory=function(_ObjectFactory6){function ImgFactory(t){var e;_classCallCheck(this,ImgFactory);var n=_possibleConstructorReturn(this,(ImgFactory.__proto__||Object.getPrototypeOf(ImgFactory)).call(this));return n.gatherApiObject=t,imgFactoryInstance||(imgFactoryInstance=n,n.annyangUtil=new AnnyangUtil),e=imgFactoryInstance,_possibleConstructorReturn(n,e)}return _inherits(ImgFactory,_ObjectFactory6),_createClass(ImgFactory,[{key:"createObject",value:function createObject(domElement,options){var img=void 0;return null==options||void 0==options?(this.options=eval(domElement.getAttribute("options")),(img=new Img(domElement,this.gatherApiObject)).draw()):(this.options=options,(img=new Img(domElement,this.gatherApiObject)).draw(this.options)),this.gatherApiObject.objects.push(img),img}},{key:"initUtils",value:function(){this.initAnnyang()}},{key:"initAnnyang",value:function(){}}]),ImgFactory}(ObjectFactory);